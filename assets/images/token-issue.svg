<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 520 180" width="520" height="180">
  <defs>
    <linearGradient id="tpcGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="tokenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7d3c98;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowIssue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#2c3e50"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="520" height="180" fill="#fafafa"/>

  <!-- Inputs group -->
  <g transform="translate(20, 20)">
    <rect x="0" y="0" width="150" height="140" rx="8" fill="#fff" stroke="#3498db" stroke-width="2"/>
    <text x="75" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2980b9">Inputs</text>
    <line x1="10" y1="32" x2="140" y2="32" stroke="#3498db" stroke-width="1" opacity="0.3"/>

    <!-- TPC UTXO: y=50, height=70, center=85 -->
    <rect x="15" y="50" width="120" height="70" rx="5" fill="url(#tpcGrad)"/>
    <text x="75" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#fff">TPC UTXO</text>
    <text x="75" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">(発行原資)</text>
  </g>

  <!-- Outputs group -->
  <g transform="translate(300, 20)">
    <rect x="0" y="0" width="200" height="140" rx="8" fill="#fff" stroke="#9b59b6" stroke-width="2"/>
    <text x="100" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#7d3c98">Outputs</text>
    <line x1="10" y1="32" x2="190" y2="32" stroke="#9b59b6" stroke-width="1" opacity="0.3"/>

    <!-- Colored Output: y=42, height=40, center=62 -->
    <rect x="15" y="42" width="170" height="40" rx="5" fill="url(#tokenGrad)"/>
    <text x="100" y="58" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#fff">Colored Output</text>
    <text x="100" y="73" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">(新規トークン)</text>

    <!-- TPC Change: y=90, height=40, center=110 -->
    <rect x="15" y="90" width="170" height="40" rx="5" fill="url(#tpcGrad)"/>
    <text x="100" y="106" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#fff">TPC Change</text>
    <text x="100" y="121" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#fff">(お釣り)</text>
  </g>

  <!-- Arrows: from TPC UTXO (20+15+120=155, 20+85=105) to outputs -->
  <!-- To Colored Output (300+15=315, 20+62=82) -->
  <path d="M170,105 L240,105 L240,82 L300,82" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowIssue)"/>
  <!-- To TPC Change (300+15=315, 20+110=130) -->
  <path d="M170,105 L240,105 L240,130 L300,130" stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrowIssue)"/>
</svg>
